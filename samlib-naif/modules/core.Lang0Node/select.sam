## Copyright 2013-2014 the Samizdat Authors (Dan Bornstein et alia).
## Licensed AS IS and WITHOUT WARRANTY under the Apache License,
## Version 2.0. Details: <http://www.apache.org/licenses/LICENSE-2.0>

#= language core.Lang0

import core.Generator;

import ./getters ::
    get_prefix,
    get_select;


##
## Exported functions
##

## Documented in spec.
export fn resolveSelection(node) {
    def prefix = get_prefix(node);
    def select = ifValueOr
        { <> get_select(node) }
        {
            ## TODO: In order to handle wildcard imports, this function will
            ## have to be able to ask for the list of exports from arbitrary
            ## modules. This will probably mean adding an argument for a
            ## "module oracle" of some sort.
            die("TODO: wildcard selection import")
        };

    def bindings = $Generator::filterAll(select) { name ->
        <> {cat(prefix, name): name}
    };

    <> cat({}, bindings*)
};

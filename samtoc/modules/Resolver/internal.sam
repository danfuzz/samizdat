## Copyright 2013-2014 the Samizdat Authors (Dan Bornstein et alia).
## Licensed AS IS and WITHOUT WARRANTY under the Apache License,
## Version 2.0. Details: <http://www.apache.org/licenses/LICENSE-2.0>

##
## Type definition: InternalResolver
##
## Payload:
## * nextResolver -- resolver to defer to when this one fails to resolve.
## * path -- filesystem path to a directory of internal-access files.
##

import ./protocol :: resolve;

fn @@InternalResolver.resolve(source) {
    ## TODO: Try doing something with `path`.

    <> (this::nextResolver).resolve(source)
};

export fn makeInternalResolver(path, nextResolver) {
    <> @InternalResolver{nextResolver, path}
};

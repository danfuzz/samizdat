## Copyright 2013-2014 the Samizdat Authors (Dan Bornstein et alia).
## Licensed AS IS and WITHOUT WARRANTY under the Apache License,
## Version 2.0. Details: <http://www.apache.org/licenses/LICENSE-2.0>

##
## Class definition: ResolveCache
##
## Payload:
## * box -- box for map of source->info bindings
##


##
## Exported Definitions
##

export fn makeCache() {
    var cache = {};
    return @ResolveCache{box: cache?}
};

export fn cacheGet(cache, source) {
    return? (cache::box*)[source]
};

export fn cachePut(cache, source, resolved) {
    def newMap = {(cache::box*)*, (source): resolved};
    cache::box* := newMap
};
